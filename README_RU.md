# IKEv2 VPN Server из Docker образа
## Описание
Благодаря данному проекту вы сможете развернуть свой собственный безопасный VPN сервер с поддержкой управления клиентами и локализацией через удобное консольное меню.

## Особенности
* Простая установка посредством Docker
* Настройка через удобное консольное меню
* Добавление, бан, перевыпуск сертификатов для клиентов
* Поддержка локализации

## Ограничения
* В качестве адреса сервера поддерживается только IP адрес
* Авторизация клиентов только посредством сертификатов

## Предварительные условия
* Сервер с установленным Docker и доступом в интернет
* Внешний IP адрес для этого сервера
* Доступ к этом серверу по ssh

## Установка
Выполните на сервере команду развертывания образа Docker:

```Bash
docker run -d --restart=always --cap-add=NET_ADMIN --net=host --privileged -p 8080 -p 500:500/udp -p 4500:4500/udp --name=ikev2vpn angrysiberianracoon/ikev2vpn
```

## Настройка сервера
Для осуществления настройки выполните команду:
```Bash
docker exec -it ikev2vpn python /data/bin/vpn.py
```
Команда открывает консольное меню настройки сервера, через которое вы можете выполнить первичную настройку, добавлять, банить и обновлять сертификаты клиентов.

## Получение сертификатов
Получить сертификаты для клиентов можно двумя способами:

### 1. Получение архива сертификатов через браузер
Выбрав соответствующий пункт меню, вы сможете скачать сертификаты по ссылке.  
После отправки в консоль "y" web-сервер прекратит работу, архив будет удалён.  
Это быстрый, но не безопасный способ получения сертификата.

### 2. Получение сертификатов через вывод консоли
Это безопасный, но сложный способ получить сертификаты.  
Вам необходимо скопировать содержимое сертификатов в 3 файла с определенными именами.  
После создания файлов необходимо сгенерировать сертификат формата PKCS#12 с помощью команды, которую вам выдаст консоль. 

## Назначение сертификатов

### ca.cer
Корневой сертификат. 
Его необходимо установить на клиентское устройство в хранилище корневых сертификатов.

### (имя_клиента).cer
Сертификат клиента. 
Необходим для указания в качестве клиентского сертификата в NetowrkManager (Linux) и генерации сертификата формата PKCS#12.  

### (имя_клиента).key
Приватный ключ сертификат клиента. 
Необходим для указания в качестве ключа клиентского сертификата в NetowrkManager (Linux) и генерации сертификата формата PKCS#12.

### (имя_клиента).p12
Сертификат формата PKCS#12.
Используется для авторизации клиента в Windows / Android.

## Поддерживаемые клиентские устройства
`Windows`: 10  
`Ubuntu `: 17.04 (через NetworkManager)  
`Android`: 6 (через приложение strongSwan)  
`Mac`:	не тестировалось  
`iOS`:	не тестировалось  

Если вы успешно использовали другие устройства или программы для подключения к VPN пожалуйста напишите мне.

## Локализация
Если вы хотите добавить свою локализацию в проект, присылайте .po файл на мой email либо делайте pull request.

## Автор
Angry Siberian Racoon   
e-mail: angrysiberianracoon@gmail.com

## Лицензия
Copyright (c) 2017 Angry Siberian Racoon, это программное обеспечение лицензировано под [MIT License](https://github.com/angrysiberianracoon/ikev2vpn/blob/master/LICENSE).